{"version":3,"file":"bundle.js","sources":["../src/index.js"],"sourcesContent":["import { toElement, toHTML } from 'dom-elementals';\nimport arrayFrom from 'array-from';\nimport { mixin } from 'dom-properties-mixin';\nimport { requestAnimationFrame } from 'animation-frame-polyfill';\n\nclass Ebla {\n    constructor(value, ...values){\n        mixin(this);\n        this.element = toElement(value, ...values);\n        Ebla.plugins.forEach(plugin=>plugin(this));\n    }\n    contains(v){\n        return this.element.contains(v);\n    }\n    append(v){\n        this.element.appendChild(element(v).element);\n        return this;\n    }\n    appendTo(v){\n        new Ebla(v).append(this.element);\n        return this;\n    }\n    prepend(v){\n        this.element.insertBefore(\n            element(v).element,\n            this.first\n        );\n        return this;\n    }\n    html(s){\n        if(!defined(s)) return this.element.innerHTML;\n        this.element.innerHTML = '';\n        this.append(s);\n        return this;\n    }\n    text(s){\n        if(!defined(s)) return this.element.textContent;\n        this.element.textContent = s;\n        return this;\n    }\n    attr(name, value){\n        if(defined(value)){\n            this.element.setAttribute(name, value);\n        }\n        return this.element.getAttribute(name);\n    }\n    prop(name, value){\n        if(defined(value)){\n            this.element[name] = value;\n        }\n        return this.element[name];\n    }\n    clone(deep){\n        return new Ebla(this.element.cloneNode(deep));\n    }\n    generate(){\n        return generate(toHTML(this.element));\n    }\n}\n\nexport function E(value, ...values){\n    if(this instanceof Ebla){\n        Ebla.call(this, value, ...values);\n    }else if(value instanceof Ebla){\n        return value;\n    }\n\n    return new Ebla(value, ...values);\n}\n\nE.prototype = Object.create(Ebla.prototype);\n\nEbla.plugins = [];\n\nE.plugin = function createPlugin({create, onInstance}){\n    create(Ebla.prototype);\n    if(onInstance)\n        Ebla.plugins.push(onInstance);\n};\n\nexport function select(s){\n    try{\n        return arrayFrom(\n            document.querySelectorAll(s)\n        ).map(E);\n    }catch(e){\n        throw e;\n    }\n}\n\nexport function spawn(v, count = 1){\n    if(typeof callback !== 'function'){\n        const items = [];\n        const e = E(v);\n        for(let i=0; i<count; i++){\n            items.push(e.clone());\n        }\n        return items;\n    }\n}\n\nclass ElementGenerator {\n    constructor(create){\n        this._create = create;\n    }\n    create(...args){\n        return createElementAsync((this._create)(...args));\n    }\n    [Symbol.iterator](){\n        return {\n            next(){\n                return this.create();\n            },\n            done(){\n                return false;\n            }\n        };\n    }\n}\n\nexport function generate(create){\n    let value;\n    if(create !== 'function'){\n        value = create;\n        create = ()=>value;\n    }\n    return new ElementGenerator(create);\n}\n\nfunction createElementAsync(v){\n    return new Promise((resolve, reject)=>{\n        requestAnimationFrame(()=>{\n            try{\n                resolve(E(v));\n            }catch(e){ reject(e); }\n        });\n    });\n}\n"],"names":["mixin","toElement","this","toHTML","const","let","requestAnimationFrame"],"mappings":"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"}