{"version":3,"file":"bundle.es.js","sources":["../src/index.js"],"sourcesContent":["import { toElement, toHTML, isElement } from 'dom-elementals';\nimport arrayFrom from 'array-from';\nimport objectAssign from 'object-assign';\nimport { mixin } from 'dom-properties-mixin';\nimport { requestAnimationFrame } from 'animation-frame-polyfill';\n\nclass Ebla {\n    constructor(value, ...values){\n        mixin(this);\n        this.element = toElement(value, ...values);\n        Ebla.plugins.forEach(plugin=>plugin.init.call(this));\n    }\n    appendTo(v){\n        v.appendChild(this.element);\n        return this;\n    }\n    append(...values){\n        values.forEach(value=>{\n            this.element.appendChild(toElement(value));\n        });\n        return this;\n    }\n    prepend(...values){\n        values.forEach(value=>{\n            this.element.insertBefore(\n                toElement(value),\n                this.first\n            );\n        });\n        return this;\n    }\n    before(...values){\n        if(this.element.parentNode){\n            values.forEach(value=>{\n                this.element.parentNode.insertBefore(\n                    toElement(value),\n                    this.element\n                );\n            });\n\n        }\n        return this;\n    }\n    after(...values){\n        if(this.element.parentNode){\n            values.forEach(value=>{\n                this.element.parentNode.insertBefore(\n                    toElement(value),\n                    this.element.nextSibling\n                );\n            });\n        }\n        return this;\n    }\n    html(s){\n        if(s === void 0) return this.element.innerHTML;\n        this.element.innerHTML = toHTML(s);\n        return this;\n    }\n    text(s){\n        if(s === void 0) return this.element.textContent;\n        this.element.textContent = s;\n        return this;\n    }\n    attr(name, value){\n        if(value === void 0){\n            if(typeof name === 'object'){\n                Object.keys(name).forEach(key=>{\n                    this.element.setAttribute(key, name[key]);\n                });\n                return this;\n            }\n            return this.element.getAttribute(name);\n\n        }\n        this.element.setAttribute(name, value);\n        return this;\n    }\n    prop(name, value){\n        if(value === void 0){\n            if(typeof name === 'object'){\n                Object.keys(name).forEach(key=>{\n                    this.element[key] = name[key];\n                });\n                return this;\n            }\n            return this.element[name];\n        }\n        this.element[name] = value;\n        return this;\n    }\n    css(source){\n        Object.keys(source).forEach(key=>{\n            this.style[key] = source[key];\n        });\n    }\n    clone(deep){\n        return new (this.constructor)(this.element.cloneNode(deep));\n    }\n    contains(v){\n        return this.element.contains(v);\n    }\n    animate(...args){\n        return this.element.animate(...args);\n    }\n    generate(){\n        return generate(()=>this.element.cloneNode(true));\n    }\n}\n\nexport function E(value, ...values){\n    if(this instanceof Ebla){\n        Ebla.call(this, value, ...values);\n    }else if(value instanceof Ebla){\n        return value;\n    }\n\n    return new Ebla(value, ...values);\n}\n\nE.prototype = Object.create(Ebla.prototype);\n\nEbla.plugins = [];\nobjectAssign(E, {\n    fragment(){\n        return document.createDocumentFragment();\n    },\n    plugin(create){\n        let control = create(Ebla.prototype);\n        if(typeof control === 'function'){\n            if(typeof control['init'] !== 'function'){\n                return;\n            }\n            Elba.plugins.push(control);\n        }\n    }\n});\n\nexport function select(s){\n    try{\n        return arrayFrom(\n            document.querySelectorAll(s)\n        ).map(e=>E(e));\n    }catch(e){\n        throw e;\n    }\n}\n\nexport function spawn(v, count = 1){\n    if(typeof callback !== 'function'){\n        const items = [];\n        const e = E(v);\n        for(let i=0; i<count; i++){\n            items.push(e.clone());\n        }\n        return items;\n    }\n}\n\nclass ElementGenerator {\n    constructor(create, parent = null){\n        this._create = create;\n        this._parent = parent;\n    }\n    create(...args){\n        let create = this._create;\n        return ElementGenerator.getElementAsync(\n            create(...args),\n            this._parent\n        );\n    }\n    static getElementAsync(v, parent = null){\n        return new Promise((resolve, reject)=>{\n            requestAnimationFrame(()=>{\n                try{\n                    if(parent && isElement(parent)){\n                        return resolve(E(v).appendTo(parent));\n                    }\n                    resolve(E(v));\n                }catch(e){ reject(e); }\n            });\n        });\n    }\n    [Symbol.iterator](){\n        return {\n            next(...args){\n                return this.create(...args);\n            },\n            done(){\n                return false;\n            }\n        };\n    }\n}\n\nexport function generate(create, parent){\n    let value;\n    if(typeof create !== 'function'){\n        value = create;\n        create = ()=>value;\n    }\n    return new ElementGenerator(create, parent);\n}\n"],"names":["this","let","const"],"mappings":"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"}